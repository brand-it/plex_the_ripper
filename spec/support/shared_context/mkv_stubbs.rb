# frozen_string_literal: true

RSpec.shared_context 'mkv_stubbs' do
  let(:drive_info_object) { OpenStruct.new(stdout_str: drive_info, stderr_str: '', status: nil) }
  let(:drive_info) do
    "MSG:1005,0,1,\"MakeMKV v1.15.2 darwin(x64-release) started\",\"%1 started\",\"MakeMKV v1.15.2 darwin(x64-release)\"\nMSG:2010,0,1,\"Optical drive \\\"BD-ROM MATSHITA BD-CMB UJ141EL 1.10d\\\" opened in OS access mode.\",\"Optical drive \\\"%1\\\" opened in OS access mode.\",\"BD-ROM MATSHITA BD-CMB UJ141EL 1.10d\"\nMSG:2003,0,3,\"Error 'Scsi error - ILLEGAL REQUEST:READ OF SCRAMBLED SECTOR WITHOUT AUTHENTICATION' occurred while reading 'BD-ROM MATSHITA BD-CMB UJ141EL 1.10' at offset '1048576'\",\"Error '%1' occurred while reading '%2' at offset '%3'\",\"Scsi error - ILLEGAL REQUEST:READ OF SCRAMBLED SECTOR WITHOUT AUTHENTICATION\",\"BD-ROM MATSHITA BD-CMB UJ141EL 1.10\",\"1048576\"\nDRV:0,2,999,1,\"BD-ROM MATSHITA BD-CMB UJ141EL 1.10\",\"18384_SCN\",\"/dev/rdisk3\"\nDRV:1,256,999,0,\"\",\"\",\"\"\nDRV:2,256,999,0,\"\",\"\",\"\"\nDRV:3,256,999,0,\"\",\"\",\"\"\nDRV:4,256,999,0,\"\",\"\",\"\"\nDRV:5,256,999,0,\"\",\"\",\"\"\nDRV:6,256,999,0,\"\",\"\",\"\"\nDRV:7,256,999,0,\"\",\"\",\"\"\nDRV:8,256,999,0,\"\",\"\",\"\"\nDRV:9,256,999,0,\"\",\"\",\"\"\nDRV:10,256,999,0,\"\",\"\",\"\"\nDRV:11,256,999,0,\"\",\"\",\"\"\nDRV:12,256,999,0,\"\",\"\",\"\"\nDRV:13,256,999,0,\"\",\"\",\"\"\nDRV:14,256,999,0,\"\",\"\",\"\"\nDRV:15,256,999,0,\"\",\"\",\"\"\nMSG:5010,0,0,\"Failed to open disc\",\"Failed to open disc\"\nTCOUNT:0\n"
  end

  let(:stubbed_info_response) do
    <<-STRING
      MSG:1005,0,1,"MakeMKV v1.15.2 darwin(x64-release) started","%1 started","MakeMKV v1.15.2 darwin(x64-release)"
      MSG:2010,0,1,"Optical drive \"BD-ROM MATSHITA BD-CMB UJ141EL 1.10d\" opened in OS access mode.","Optical drive \"%1\" opened in OS access mode.","BD-ROM MATSHITA BD-CMB UJ141EL 1.10d"
      DRV:0,2,999,1,"BD-ROM MATSHITA BD-CMB UJ141EL 1.10","18384_SCN","/dev/rdisk2"
      DRV:1,256,999,0,"","",""
      DRV:2,256,999,0,"","",""
      DRV:3,256,999,0,"","",""
      DRV:4,256,999,0,"","",""
      DRV:5,256,999,0,"","",""
      DRV:6,256,999,0,"","",""
      DRV:7,256,999,0,"","",""
      DRV:8,256,999,0,"","",""
      DRV:9,256,999,0,"","",""
      DRV:10,256,999,0,"","",""
      DRV:11,256,999,0,"","",""
      DRV:12,256,999,0,"","",""
      DRV:13,256,999,0,"","",""
      DRV:14,256,999,0,"","",""
      DRV:15,256,999,0,"","",""
      MSG:3007,0,0,"Using direct disc access mode","Using direct disc access mode"
      MSG:3025,16777216,3,"Title #1 has length of 11 seconds which is less than minimum title length of 120 seconds and was therefore skipped","Title #%1 has length of %2 seconds which is less than minimum title length of %3 seconds and was therefore skipped","1","11","120"
      MSG:3025,0,3,"Title #1/1 has length of 8 seconds which is less than minimum title length of 120 seconds and was therefore skipped","Title #%1 has length of %2 seconds which is less than minimum title length of %3 seconds and was therefore skipped","1/1","8","120"
      MSG:3028,0,3,"Title #2 was added (10 cell(s), 1:35:13)","Title #%1 was added (%2 cell(s), %3)","2","10","1:35:13"
      MSG:3028,0,3,"Title #3 was added (11 cell(s), 1:53:42)","Title #%1 was added (%2 cell(s), %3)","3","11","1:53:42"
      MSG:3028,0,3,"Title #4 was added (10 cell(s), 1:28:33)","Title #%1 was added (%2 cell(s), %3)","4","10","1:28:33"
      MSG:3028,0,3,"Title #5 was added (10 cell(s), 1:31:24)","Title #%1 was added (%2 cell(s), %3)","5","10","1:31:24"
      MSG:5011,0,0,"Operation successfully completed","Operation successfully completed"
      TCOUNT:4
      CINFO:1,6206,"DVD disc"
      CINFO:2,0,"18384_SCN"
      CINFO:30,0,"18384_SCN"
      CINFO:31,6119,"<b>Source information</b><br>"
      CINFO:32,0,"18384_SCN"
      CINFO:33,0,"0"
      TINFO:0,8,0,"10"
      TINFO:0,9,0,"1:35:13"
      TINFO:0,10,0,"1.8 GB"
      TINFO:0,11,0,"1947029504"
      TINFO:0,24,0,"02"
      TINFO:0,25,0,"1"
      TINFO:0,26,0,"1-10"
      TINFO:0,27,0,"title_t00.mkv"
      TINFO:0,30,0,"10 chapter(s) , 1.8 GB"
      TINFO:0,31,6120,"<b>Title information</b><br>"
      TINFO:0,33,0,"0"
      SINFO:0,0,1,6201,"Video"
      SINFO:0,0,5,0,"V_MPEG2"
      SINFO:0,0,6,0,"Mpeg2"
      SINFO:0,0,7,0,"Mpeg2"
      SINFO:0,0,13,0,"9.8 Mb/s"
      SINFO:0,0,19,0,"720x480"
      SINFO:0,0,20,0,"16:9"
      SINFO:0,0,21,0,"29.97 (30000/1001)"
      SINFO:0,0,22,0,"0"
      SINFO:0,0,30,0,"Mpeg2"
      SINFO:0,0,31,6121,"<b>Track information</b><br>"
      SINFO:0,0,33,0,"0"
      SINFO:0,0,38,0,""
      SINFO:0,0,42,5088,"( Lossless conversion )"
      SINFO:0,1,1,6202,"Audio"
      SINFO:0,1,2,5091,"Stereo"
      SINFO:0,1,3,0,"eng"
      SINFO:0,1,4,0,"English"
      SINFO:0,1,5,0,"A_AC3"
      SINFO:0,1,6,0,"DD"
      SINFO:0,1,7,0,"Dolby Digital"
      SINFO:0,1,13,0,"192 Kb/s"
      SINFO:0,1,14,0,"2"
      SINFO:0,1,17,0,"48000"
      SINFO:0,1,22,0,"0"
      SINFO:0,1,30,0,"DD Stereo English"
      SINFO:0,1,31,6121,"<b>Track information</b><br>"
      SINFO:0,1,33,0,"90"
      SINFO:0,1,38,0,"d"
      SINFO:0,1,39,0,"Default"
      SINFO:0,1,40,0,"stereo"
      SINFO:0,1,42,5088,"( Lossless conversion )"
      TINFO:1,8,0,"11"
      TINFO:1,9,0,"1:53:42"
      TINFO:1,10,0,"2.1 GB"
      TINFO:1,11,0,"2321354752"
      TINFO:1,24,0,"03"
      TINFO:1,25,0,"1"
      TINFO:1,26,0,"1-11"
      TINFO:1,27,0,"title_t01.mkv"
      TINFO:1,30,0,"11 chapter(s) , 2.1 GB"
      TINFO:1,31,6120,"<b>Title information</b><br>"
      TINFO:1,33,0,"0"
      SINFO:1,0,1,6201,"Video"
      SINFO:1,0,5,0,"V_MPEG2"
      SINFO:1,0,6,0,"Mpeg2"
      SINFO:1,0,7,0,"Mpeg2"
      SINFO:1,0,13,0,"9.8 Mb/s"
      SINFO:1,0,19,0,"720x480"
      SINFO:1,0,20,0,"16:9"
      SINFO:1,0,21,0,"29.97 (30000/1001)"
      SINFO:1,0,22,0,"0"
      SINFO:1,0,30,0,"Mpeg2"
      SINFO:1,0,31,6121,"<b>Track information</b><br>"
      SINFO:1,0,33,0,"0"
      SINFO:1,0,38,0,""
      SINFO:1,0,42,5088,"( Lossless conversion )"
      SINFO:1,1,1,6202,"Audio"
      SINFO:1,1,2,5091,"Stereo"
      SINFO:1,1,3,0,"eng"
      SINFO:1,1,4,0,"English"
      SINFO:1,1,5,0,"A_AC3"
      SINFO:1,1,6,0,"DD"
      SINFO:1,1,7,0,"Dolby Digital"
      SINFO:1,1,13,0,"192 Kb/s"
      SINFO:1,1,14,0,"2"
      SINFO:1,1,17,0,"48000"
      SINFO:1,1,22,0,"0"
      SINFO:1,1,30,0,"DD Stereo English"
      SINFO:1,1,31,6121,"<b>Track information</b><br>"
      SINFO:1,1,33,0,"90"
      SINFO:1,1,38,0,"d"
      SINFO:1,1,39,0,"Default"
      SINFO:1,1,40,0,"stereo"
      SINFO:1,1,42,5088,"( Lossless conversion )"
      TINFO:2,8,0,"10"
      TINFO:2,9,0,"1:28:33"
      TINFO:2,10,0,"1.6 GB"
      TINFO:2,11,0,"1810173952"
      TINFO:2,24,0,"04"
      TINFO:2,25,0,"1"
      TINFO:2,26,0,"1-10"
      TINFO:2,27,0,"title_t02.mkv"
      TINFO:2,30,0,"10 chapter(s) , 1.6 GB"
      TINFO:2,31,6120,"<b>Title information</b><br>"
      TINFO:2,33,0,"0"
      SINFO:2,0,1,6201,"Video"
      SINFO:2,0,5,0,"V_MPEG2"
      SINFO:2,0,6,0,"Mpeg2"
      SINFO:2,0,7,0,"Mpeg2"
      SINFO:2,0,13,0,"9.8 Mb/s"
      SINFO:2,0,19,0,"720x480"
      SINFO:2,0,20,0,"4:3"
      SINFO:2,0,21,0,"29.97 (30000/1001)"
      SINFO:2,0,22,0,"0"
      SINFO:2,0,30,0,"Mpeg2"
      SINFO:2,0,31,6121,"<b>Track information</b><br>"
      SINFO:2,0,33,0,"0"
      SINFO:2,0,38,0,""
      SINFO:2,0,42,5088,"( Lossless conversion )"
      SINFO:2,1,1,6202,"Audio"
      SINFO:2,1,2,5091,"Stereo"
      SINFO:2,1,3,0,"eng"
      SINFO:2,1,4,0,"English"
      SINFO:2,1,5,0,"A_AC3"
      SINFO:2,1,6,0,"DD"
      SINFO:2,1,7,0,"Dolby Digital"
      SINFO:2,1,13,0,"192 Kb/s"
      SINFO:2,1,14,0,"2"
      SINFO:2,1,17,0,"48000"
      SINFO:2,1,22,0,"0"
      SINFO:2,1,30,0,"DD Stereo English"
      SINFO:2,1,31,6121,"<b>Track information</b><br>"
      SINFO:2,1,33,0,"90"
      SINFO:2,1,38,0,"d"
      SINFO:2,1,39,0,"Default"
      SINFO:2,1,40,0,"stereo"
      SINFO:2,1,42,5088,"( Lossless conversion )"
      TINFO:3,8,0,"10"
      TINFO:3,9,0,"1:31:24"
      TINFO:3,10,0,"1.7 GB"
      TINFO:3,11,0,"1870516224"
      TINFO:3,24,0,"05"
      TINFO:3,25,0,"1"
      TINFO:3,26,0,"1-10"
      TINFO:3,27,0,"title_t03.mkv"
      TINFO:3,30,0,"10 chapter(s) , 1.7 GB"
      TINFO:3,31,6120,"<b>Title information</b><br>"
      TINFO:3,33,0,"0"
      SINFO:3,0,1,6201,"Video"
      SINFO:3,0,5,0,"V_MPEG2"
      SINFO:3,0,6,0,"Mpeg2"
      SINFO:3,0,7,0,"Mpeg2"
      SINFO:3,0,13,0,"9.8 Mb/s"
      SINFO:3,0,19,0,"720x480"
      SINFO:3,0,20,0,"4:3"
      SINFO:3,0,21,0,"29.97 (30000/1001)"
      SINFO:3,0,22,0,"0"
      SINFO:3,0,30,0,"Mpeg2"
      SINFO:3,0,31,6121,"<b>Track information</b><br>"
      SINFO:3,0,33,0,"0"
      SINFO:3,0,38,0,""
      SINFO:3,0,42,5088,"( Lossless conversion )"
      SINFO:3,1,1,6202,"Audio"
      SINFO:3,1,2,5091,"Stereo"
      SINFO:3,1,3,0,"eng"
      SINFO:3,1,4,0,"English"
      SINFO:3,1,5,0,"A_AC3"
      SINFO:3,1,6,0,"DD"
      SINFO:3,1,7,0,"Dolby Digital"
      SINFO:3,1,13,0,"192 Kb/s"
      SINFO:3,1,14,0,"2"
      SINFO:3,1,17,0,"48000"
      SINFO:3,1,22,0,"0"
      SINFO:3,1,30,0,"DD Stereo English"
      SINFO:3,1,31,6121,"<b>Track information</b><br>"
      SINFO:3,1,33,0,"90"
      SINFO:3,1,38,0,"d"
      SINFO:3,1,39,0,"Default"
      SINFO:3,1,40,0,"stereo"
      SINFO:3,1,42,5088,"( Lossless conversion )"
    STRING
  end
end
